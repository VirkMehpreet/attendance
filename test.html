<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Full-width Carousel — seamless loop</title>
<style>
  :root {
    --accent: #ffcc00;
    --bg: #1b263b;
    --slide-bg: #415a77;
    --height: 260px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:#0d1b2a;
    color:#fff;
  }

  /* Full width section that contains the carousel (like your sketch) */
  .carousel-wrap {
    width:100%;
    overflow:hidden;
    background:var(--bg);
    height:var(--height);
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
  }

  /* slides row: will contain clones too */
  .slides {
    display:flex;
    height:100%;
    transition: transform 0.6s ease-in-out;
    will-change: transform;
  }

  /* each slide occupies exactly 100% of the viewport width */
  .slide {
    min-width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 20px;
    text-align:center;
    background:var(--slide-bg);
    font-size:1.25rem;
    font-style: italic;
  }

  /* arrows */
  .arrow {
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background: rgba(255,255,255,0.12);
    border: none;
    color: white;
    font-size: 28px;
    width:44px;
    height:44px;
    border-radius:50%;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:20;
  }
  .arrow:hover { background: rgba(255,255,255,0.22); }
  .prev { left:18px; }
  .next { right:18px; }

  /* dots centered at the bottom */
  .dots {
    position:absolute;
    bottom:14px;
    width:100%;
    display:flex;
    justify-content:center;
    gap:10px;
    z-index:20;
  }
  .dot {
    width:10px;height:10px;border-radius:50%;background:#9aa6b4;cursor:pointer;
  }
  .dot.active { background:var(--accent); transform:scale(1.15); }

  /* responsive tweak */
  @media (max-width:640px){
    .arrow{ width:36px; height:36px; font-size:22px; }
    .slide{ font-size:1rem; padding:14px }
  }
</style>
</head>
<body>

<!-- Full width carousel wrapper -->
<section class="carousel-wrap" aria-label="Quotes carousel">
  <div class="slides" id="slides">
    <!-- real slides (the script will clone first/last for smooth looping) -->
    <div class="slide">“The best way to predict the future is to invent it.” — Alan Kay</div>
    <div class="slide">“In the middle of difficulty lies opportunity.” — Albert Einstein</div>
    <div class="slide">“Strive not to be a success, but rather to be of value.” — Albert Einstein</div>
  </div>

  <button class="arrow prev" id="prev" aria-label="Previous">&#8249;</button>
  <button class="arrow next" id="next" aria-label="Next">&#8250;</button>

  <div class="dots" id="dots" aria-hidden="false"></div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const slidesContainer = document.getElementById('slides');
  const originalSlides = Array.from(slidesContainer.children);
  const slideCount = originalSlides.length;

  // clone nodes for smooth looping
  const firstClone = originalSlides[0].cloneNode(true);
  const lastClone  = originalSlides[slideCount - 1].cloneNode(true);

  slidesContainer.appendChild(firstClone);
  slidesContainer.insertBefore(lastClone, slidesContainer.firstChild);

  // now allSlides includes clones at positions 0 and last
  let allSlides = Array.from(slidesContainer.children); // length = slideCount + 2

  // set initial index to 1 (the first real slide)
  let index = 1;
  const slideWidth = () => slidesContainer.getBoundingClientRect().width / (allSlides.length); 
  // We will use percentages for translateX, so we don't need exact pixel width.

  // place container at first real slide
  slidesContainer.style.transform = `translateX(-${index * 100}%)`;

  // create dots
  const dotsContainer = document.getElementById('dots');
  for (let i = 0; i < slideCount; i++){
    const d = document.createElement('div');
    d.className = 'dot' + (i === 0 ? ' active' : '');
    d.dataset.slide = i; // maps to real slide index (0..slideCount-1)
    dotsContainer.appendChild(d);
  }
  const dots = Array.from(dotsContainer.children);

  // helpers
  function updateDots() {
    dots.forEach((dot, i) => dot.classList.toggle('active', i === ((index - 1 + slideCount) % slideCount)));
  }

  function moveToIndex(nextIndex, withTransition = true) {
    if (withTransition) slidesContainer.style.transition = 'transform 0.6s ease-in-out';
    else slidesContainer.style.transition = 'none';
    slidesContainer.style.transform = `translateX(-${nextIndex * 100}%)`;
    index = nextIndex;
    updateDots();
  }

  // next / prev logic
  function nextSlide() { moveToIndex(index + 1, true); }
  function prevSlide() { moveToIndex(index - 1, true); }

  // when transition ends, if we are on a clone, jump to the corresponding real slide without animation
  slidesContainer.addEventListener('transitionend', () => {
    // if landed on the clone after the last slide (index === slideCount + 1), jump to index=1
    if (index === slideCount + 1) {
      moveToIndex(1, false);
    }
    // if landed on the left clone (index === 0), jump to real last (index = slideCount)
    if (index === 0) {
      moveToIndex(slideCount, false);
    }
  });

  // dots click
  dots.forEach((dot, i) => {
    dot.addEventListener('click', () => {
      // i is 0..slideCount-1; real slide index = i+1
      moveToIndex(i + 1, true);
      restartAutoplay();
    });
  });

  // buttons
  document.getElementById('next').addEventListener('click', () => {
    nextSlide();
    restartAutoplay();
  });
  document.getElementById('prev').addEventListener('click', () => {
    prevSlide();
    restartAutoplay();
  });

  // autoplay with pause on hover
  let autoplayInterval = 4500;
  let timer = null;
  function startAutoplay(){
    stopAutoplay();
    timer = setInterval(() => nextSlide(), autoplayInterval);
  }
  function stopAutoplay(){
    if (timer) { clearInterval(timer); timer = null; }
  }
  function restartAutoplay(){ stopAutoplay(); startAutoplay(); }

  // pause on hover (the whole carousel-wrap)
  const wrap = document.querySelector('.carousel-wrap');
  wrap.addEventListener('mouseenter', stopAutoplay);
  wrap.addEventListener('mouseleave', startAutoplay);

  // start
  startAutoplay();

  // Defensive: if window resized, ensure transform still expresses percent (no change needed),
  // but we can force a reapply to be safe:
  window.addEventListener('resize', () => {
    moveToIndex(index, false);
  });

  // Keyboard arrows (optional)
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') { nextSlide(); restartAutoplay(); }
    if (e.key === 'ArrowLeft')  { prevSlide(); restartAutoplay(); }
  });

  // Accessibility: click handling on dots with keyboard
  dots.forEach(d => d.tabIndex = 0);
  dots.forEach(d => d.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      d.click();
    }
  }));
});
</script>
</body>
</html>
